"use strict";var express=require("express"),bodyParser=require("body-parser"),CORS=require("cors"),app=express(),token="ahuBHejkJJiMDhmODZhZi0zaeLTQ4ZfeaseOGZgesai1jZWYgrTA07i73Gebhu98";app.use(bodyParser.json()),app.use(CORS());var colors=[{color:"aliceblue",code:{hex:"#f0f8ff"},id:1},{color:"limegreen",code:{hex:"#99ddbc"},id:2},{color:"aqua",code:{hex:"#00ffff"},id:3},{color:"aquamarine",code:{hex:"#7fffd4"},id:4},{color:"lilac",code:{hex:"#9a99dd"},id:5},{color:"softpink",code:{hex:"#dd99ba"},id:6},{color:"bisque",code:{hex:"#dd9a99"},id:7},{color:"softyellow",code:{hex:"#dcdd99"},id:8},{color:"blanchedalmond",code:{hex:"#ffebcd"},id:9},{color:"blue",code:{hex:"#6093ca"},id:10},{color:"blueviolet",code:{hex:"#8a2be2"},id:11}],nextId=12;function authenticator(o,e,s){o.headers.authorization===token?s():e.status(403).json({error:"User must be logged in to do that."})}app.post("/api/login",function(o,e){var s=o.body,r=s.username,d=s.password;"Lambda School"===r&&"i<3Lambd4"===d?(o.loggedIn=!0,setTimeout(function(){e.status(200).json({payload:token})},1e3)):e.status(403).json({error:"Username or Password incorrect. Please see Readme"})}),app.get("/api/colors",authenticator,function(o,e){e.send(colors)}),app.post("/api/colors",authenticator,function(o,e){if(void 0!==o.body.color&&void 0!==o.body.code){var s=o.body;s.id=nextId,colors.push(s)}nextId+=1,e.status(201).json(colors)}),app.put("/api/colors/:id",authenticator,function(e,o){e.params.id||o.status(400).send("Your request is missing the color id"),void 0!==e.body.id&&e.body.color&&e.body.code||o.status(422).send("Make sure your request body has all the fields it needs"),colors=colors.map(function(o){return"".concat(o.id)===e.params.id?e.body:o}),o.status(200).send(e.body)}),app.delete("/api/colors/:id",authenticator,function(e,o){e.params.id||o.status(400).send("Your request is missing the color id"),colors=colors.filter(function(o){return"".concat(o.id)!==e.params.id}),o.status(202).send(e.params.id)}),app.get("/",function(o,e){e.send("App is working 👍")}),app.listen(5e3,function(){console.log("Server listening on port 5000")});